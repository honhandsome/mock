<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>mock-http</title>
    <script type="text/javascript">
        var path = ""

        window.onload = function () {
            path = window.location.search.replace("?path=", "")
            getRequest()
        }

        function getRequest() {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    var httpEntity = JSON.parse(xmlhttp.responseText)
                    document.getElementById("request_header").innerText = httpEntity.requestHeader
                    document.getElementById("query_parameter").innerText = httpEntity.queryParameter
                    document.getElementById("request_body").innerText = httpEntity.requestBody
                    document.getElementById("response_header").innerText = httpEntity.responseHeader
                    document.getElementById("response_body").value = httpEntity.responseBody
                }
            }
            xmlhttp.open("POST", "/getRequest", true);
            xmlhttp.setRequestHeader("Content-type", "application/json");
            var body = {};
            body.path = path;
            xmlhttp.send(JSON.stringify(body));
        }

        function mock() {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    alert("Mock Success");
                }
            }
            xmlhttp.open("POST", "/mock", true);
            xmlhttp.setRequestHeader("Content-type", "application/json");
            var body = {};
            body.path = path;
            body.responseBody = encodeURI(document.getElementById("response_body").value);
            xmlhttp.send(JSON.stringify(body));
        }
    </script>
</head>

<body>
    <h4>REQUEST HEADER:</h4>
    <p id="request_header"></p>
    <h4>QUERY PARAMETER:</h4>
    <p id="query_parameter"></p>
    <h4>REQUEST BODY:</h4>
    <p id="request_body"></p>
    <h4>RESPONSE HEADER:</h4>
    <p id="response_header"></p>
    <h4>RESPONSE BODY:</h4>
    <button type="button" onclick="mock()">Mock</button><br>
    <br>
    <textarea id="response_body" style="width:100%;height:800px;"></textarea>
</body>

</html>